{"ast":null,"code":"import _slicedToArray from \"/home/ductran/guide-rest-client-reactjs/start/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useRifm } from 'rifm';\nimport { useUtils } from './useUtils';\nimport { createDelegatedEventHandler } from '../utils';\nimport { maskedDateFormatter, getDisplayDate, checkMaskIsValidForCurrentFormat } from '../text-field-helper';\nexport function useMaskedInput(_ref) {\n  var _ref$acceptRegex = _ref.acceptRegex,\n      acceptRegex = _ref$acceptRegex === void 0 ? /[\\d]/gi : _ref$acceptRegex,\n      disabled = _ref.disabled,\n      disableMaskedInput = _ref.disableMaskedInput,\n      ignoreInvalidInputs = _ref.ignoreInvalidInputs,\n      inputFormat = _ref.inputFormat,\n      inputProps = _ref.inputProps,\n      label = _ref.label,\n      mask = _ref.mask,\n      onChange = _ref.onChange,\n      rawValue = _ref.rawValue,\n      readOnly = _ref.readOnly,\n      rifmFormatter = _ref.rifmFormatter,\n      TextFieldProps = _ref.TextFieldProps,\n      validationError = _ref.validationError;\n  var utils = useUtils();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isFocused = _React$useState2[0],\n      setIsFocused = _React$useState2[1];\n\n  var formatHelperText = utils.getFormatHelperText(inputFormat);\n  var shouldUseMaskedInput = React.useMemo(function () {\n    // formatting of dates is a quite slow thing, so do not make useless .format calls\n    if (!mask || disableMaskedInput) {\n      return false;\n    }\n\n    return checkMaskIsValidForCurrentFormat(mask, inputFormat, acceptRegex, utils);\n  }, [acceptRegex, disableMaskedInput, inputFormat, mask, utils]);\n  var formatter = React.useMemo(function () {\n    return shouldUseMaskedInput && mask ? maskedDateFormatter(mask, acceptRegex) : function (st) {\n      return st;\n    };\n  }, [acceptRegex, mask, shouldUseMaskedInput]); // TODO: Implement with controlled vs unctrolled `rawValue`\n\n  var currentInputValue = getDisplayDate(utils, rawValue, inputFormat);\n\n  var _React$useState3 = React.useState(currentInputValue),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      innerInputValue = _React$useState4[0],\n      setInnerInputValue = _React$useState4[1];\n\n  var previousInputValueRef = React.useRef(currentInputValue);\n  React.useEffect(function () {\n    previousInputValueRef.current = currentInputValue;\n  }, [currentInputValue]);\n  var notTyping = !isFocused;\n  var valueChanged = previousInputValueRef.current !== currentInputValue; // Update the input value only if the value changed outside of typing\n\n  if (notTyping && valueChanged && (rawValue === null || utils.isValid(rawValue))) {\n    if (currentInputValue !== innerInputValue) {\n      setInnerInputValue(currentInputValue);\n    }\n  }\n\n  var handleChange = function handleChange(text) {\n    var finalString = text === '' || text === mask ? '' : text;\n    setInnerInputValue(finalString);\n    var date = finalString === null ? null : utils.parse(finalString, inputFormat);\n\n    if (ignoreInvalidInputs && !utils.isValid(date)) {\n      return;\n    }\n\n    onChange(date, finalString || undefined);\n  };\n\n  var rifmProps = useRifm({\n    value: innerInputValue,\n    onChange: handleChange,\n    format: rifmFormatter || formatter\n  });\n  var inputStateArgs = shouldUseMaskedInput ? rifmProps : {\n    value: innerInputValue,\n    onChange: function onChange(event) {\n      handleChange(event.currentTarget.value);\n    }\n  };\n  return _extends({\n    label: label,\n    disabled: disabled,\n    error: validationError,\n    inputProps: _extends({}, inputStateArgs, {\n      disabled: disabled,\n      placeholder: formatHelperText,\n      readOnly: readOnly,\n      type: shouldUseMaskedInput ? 'tel' : 'text'\n    }, inputProps, {\n      onFocus: createDelegatedEventHandler(function () {\n        setIsFocused(true);\n      }, inputProps == null ? void 0 : inputProps.onFocus),\n      onBlur: createDelegatedEventHandler(function () {\n        setIsFocused(false);\n      }, inputProps == null ? void 0 : inputProps.onBlur)\n    })\n  }, TextFieldProps);\n}\nexport default useMaskedInput;","map":{"version":3,"sources":["/home/ductran/guide-rest-client-reactjs/start/src/main/frontend/node_modules/@mui/lab/internal/pickers/hooks/useMaskedInput.js"],"names":["_extends","React","useRifm","useUtils","createDelegatedEventHandler","maskedDateFormatter","getDisplayDate","checkMaskIsValidForCurrentFormat","useMaskedInput","acceptRegex","disabled","disableMaskedInput","ignoreInvalidInputs","inputFormat","inputProps","label","mask","onChange","rawValue","readOnly","rifmFormatter","TextFieldProps","validationError","utils","useState","isFocused","setIsFocused","formatHelperText","getFormatHelperText","shouldUseMaskedInput","useMemo","formatter","st","currentInputValue","innerInputValue","setInnerInputValue","previousInputValueRef","useRef","useEffect","current","notTyping","valueChanged","isValid","handleChange","text","finalString","date","parse","undefined","rifmProps","value","format","inputStateArgs","event","currentTarget","error","placeholder","type","onFocus","onBlur"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useRifm } from 'rifm';\nimport { useUtils } from './useUtils';\nimport { createDelegatedEventHandler } from '../utils';\nimport { maskedDateFormatter, getDisplayDate, checkMaskIsValidForCurrentFormat } from '../text-field-helper';\nexport function useMaskedInput({\n  acceptRegex = /[\\d]/gi,\n  disabled,\n  disableMaskedInput,\n  ignoreInvalidInputs,\n  inputFormat,\n  inputProps,\n  label,\n  mask,\n  onChange,\n  rawValue,\n  readOnly,\n  rifmFormatter,\n  TextFieldProps,\n  validationError\n}) {\n  const utils = useUtils();\n  const [isFocused, setIsFocused] = React.useState(false);\n  const formatHelperText = utils.getFormatHelperText(inputFormat);\n  const shouldUseMaskedInput = React.useMemo(() => {\n    // formatting of dates is a quite slow thing, so do not make useless .format calls\n    if (!mask || disableMaskedInput) {\n      return false;\n    }\n\n    return checkMaskIsValidForCurrentFormat(mask, inputFormat, acceptRegex, utils);\n  }, [acceptRegex, disableMaskedInput, inputFormat, mask, utils]);\n  const formatter = React.useMemo(() => shouldUseMaskedInput && mask ? maskedDateFormatter(mask, acceptRegex) : st => st, [acceptRegex, mask, shouldUseMaskedInput]); // TODO: Implement with controlled vs unctrolled `rawValue`\n\n  const currentInputValue = getDisplayDate(utils, rawValue, inputFormat);\n  const [innerInputValue, setInnerInputValue] = React.useState(currentInputValue);\n  const previousInputValueRef = React.useRef(currentInputValue);\n  React.useEffect(() => {\n    previousInputValueRef.current = currentInputValue;\n  }, [currentInputValue]);\n  const notTyping = !isFocused;\n  const valueChanged = previousInputValueRef.current !== currentInputValue; // Update the input value only if the value changed outside of typing\n\n  if (notTyping && valueChanged && (rawValue === null || utils.isValid(rawValue))) {\n    if (currentInputValue !== innerInputValue) {\n      setInnerInputValue(currentInputValue);\n    }\n  }\n\n  const handleChange = text => {\n    const finalString = text === '' || text === mask ? '' : text;\n    setInnerInputValue(finalString);\n    const date = finalString === null ? null : utils.parse(finalString, inputFormat);\n\n    if (ignoreInvalidInputs && !utils.isValid(date)) {\n      return;\n    }\n\n    onChange(date, finalString || undefined);\n  };\n\n  const rifmProps = useRifm({\n    value: innerInputValue,\n    onChange: handleChange,\n    format: rifmFormatter || formatter\n  });\n  const inputStateArgs = shouldUseMaskedInput ? rifmProps : {\n    value: innerInputValue,\n    onChange: event => {\n      handleChange(event.currentTarget.value);\n    }\n  };\n  return _extends({\n    label,\n    disabled,\n    error: validationError,\n    inputProps: _extends({}, inputStateArgs, {\n      disabled,\n      placeholder: formatHelperText,\n      readOnly,\n      type: shouldUseMaskedInput ? 'tel' : 'text'\n    }, inputProps, {\n      onFocus: createDelegatedEventHandler(() => {\n        setIsFocused(true);\n      }, inputProps == null ? void 0 : inputProps.onFocus),\n      onBlur: createDelegatedEventHandler(() => {\n        setIsFocused(false);\n      }, inputProps == null ? void 0 : inputProps.onBlur)\n    })\n  }, TextFieldProps);\n}\nexport default useMaskedInput;"]},"metadata":{},"sourceType":"module"}